# 大界机器人
## 一面
>1、依赖属性是什么
2、依赖注入的生命周期、报错，怎么分析错误、依赖注入有哪几种方式
3、WPF资源
4、WPF绑定的原理
5、多线程相关
6、ORM相关原理
7、面向接口设计的优点




### 解答：
#### 1、依赖属性是什么

#####  **. 依赖属性（Dependency Property）**

- **定义**：WPF/Silverlight中用于扩展CLR属性的系统，支持数据绑定、动画、样式等特性。
    
- **特点**：
    
    - **属性继承**：子元素可继承父元素的属性值（如`FontSize`）。
        
    - **自动变更通知**：通过`PropertyChangedCallback`响应属性值变化。
        
    - **节省内存**：非静态值存储于全局`EffectiveValueEntry`中，按需分配。
        
- **实现**：使用`DependencyProperty.Register`静态方法注册。
    
- **对比CLR属性**：依赖属性通过依赖对象（`DependencyObject`）管理，支持复杂交互场景。

####  2、依赖注入的生命周期、报错，怎么分析错误
#####  **2. 依赖注入（DI）生命周期与错误分析**

- **生命周期**：
    
    - **Transient**：每次请求创建新实例。
        
    - **Scoped**：同一作用域内共享实例（如HTTP请求）。
        
    - **Singleton**：全局单例。
        
- **常见错误**：
    
    - **服务未注册**：抛出`InvalidOperationException`。
        
    - **循环依赖**：A依赖B，B又依赖A。
        
    - **生命周期不匹配**：如Scoped服务注入到Singleton中。
        
- **分析步骤**：
    
    1. 检查异常消息，定位未注册的服务或依赖关系。
        
    2. 使用日志记录容器构建过程。
        
    3. 工具辅助：如.NET的`dotnet watch`或第三方DI分析器。
#### 3、WPF资源
#####  **3. WPF资源**

- **资源类型**：
    
    - **静态资源（StaticResource）**：加载时一次性解析。
        
    - **动态资源（DynamicResource）**：运行时动态更新（如主题切换）。
        
- **作用域**：
    
    - **应用程序级**：`App.xaml`中定义，全局可用。
        
    - **窗口/控件级**：在窗口或控件`Resources`标签内定义，局部有效。
        
- **用途**：存储样式（`Style`）、模板（`ControlTemplate`）、画刷（`Brush`）等可重用对象。
-
#### 4、WPF绑定的原理
#####  **WPF绑定原理**

- **核心机制**：
    
    - **绑定源与目标**：通过`Binding`对象关联源属性（如ViewModel）与目标属性（如UI控件）。
        
    - **数据流方向**：`Mode`控制方向（`OneWay`、`TwoWay`等）。
        
    - **更新触发**：`UpdateSourceTrigger`决定何时同步数据（如失去焦点时）。
        
- **底层实现**：
    
    - 依赖属性系统监听属性变化。
        
    - `INotifyPropertyChanged`接口通知绑定目标更新。
        
    - 使用`BindingExpression`管理绑定状态。
#### 5、多线程相关
#####  **5. 多线程关键点**

- **线程与任务**：
    
    - **Thread**：底层线程管理，需手动处理同步。
        
    - **Task**：基于线程池，支持`async/await`异步模型。
        
- **同步机制**：
    
    - **lock/Monitor**：临界区保护。
        
    - **Semaphore/Mutex**：控制资源访问数量。
        
    - **Concurrent Collections**：线程安全集合（如`ConcurrentQueue`）。
        
- **常见问题**：
    
    - **死锁**：多个线程互相等待资源释放。
        
    - **竞态条件**：未同步导致数据不一致。

#### 6、ORM相关原理
#####  **ORM原理**

- **核心功能**：
    
    - **对象-表映射**：将类映射到数据库表，属性映射到列。
        
    - **查询转换**：将LINQ或方法链转换为SQL（如EF Core）。
        
    - **变更跟踪**：自动检测实体状态变化，生成更新语句。
        
- **工作模式**：
    
    - **Code First**：通过代码定义模型，生成数据库。
        
    - **Database First**：从现有数据库生成模型类。
        
- **性能优化**：
    
    - **延迟加载**：按需加载关联数据。
        
    - **批处理**：合并多个SQL操作减少开销。
#### 7、面向接口设计的优点
#####  **7. 面向接口设计的优点**

- **解耦**：接口隔离实现与使用，降低模块依赖性。
    
- **可测试性**：通过Mock接口实现单元测试。
    
- **扩展性**：新增实现类无需修改现有代码（符合开闭原则）。
    
- **多态支持**：同一接口可承载不同实现（如策略模式）。
    
- **依赖注入**：便于通过接口注入具体服务。

## 二面准备（根据简历）
```
1、什么是委托？委托分几种？有什么区别？平时用过哪几种？
2、什么是事件？
3、什么是泛型？
4、什么是多线程？
5、在简历中提到熟悉C#高级语法，能否举例说明**委托和事件**在实际项目中的应用场景？在多线程环境下如何避免事件引发的线程安全问题？
6、在WPF中，**依赖属性**与普通CLR属性的核心区别是什么？请用代码片段说明如何定义一个依赖属性，并解释其数据绑定机制。
7、使用ASP.NET Core时，如何实现**依赖注入的生命周期管理**（Transient/Scoped/Singleton）？如果将一个Scoped服务注入到Singleton中，会导致什么问题？
8、**EFCore的变更跟踪机制**是如何工作的？在批量更新数据时，如何通过`AsNoTracking()`优化性能？
9、你提到熟练使用Dapper，对比EFCore，Dapper在哪些场景下更具优势？请举例说明
10、在C#中，**Task和Thread**的区别是什么？如何通过`async/await`避免阻塞UI线程？
11、 使用`ConcurrentQueue`时，如果多个线程同时进行读写操作，如何确保数据一致性？请结合代码说明。
12、 你使用过NModbus和S7.NetPlus，能否解释**Modbus TCP协议**与**S7协议**的核心差异？在开发通讯工具时，如何保证数据的实时性和可靠性？
13、在优化WMS系统时，你提到“通过精细调整数据库部署”提升了效率，具体做了哪些优化（如索引设计、查询优化）？请举例说明。
14、使用Vue3+ElementPlus开发WCS系统时，如何实现前后端数据的高效交互？是否使用过WebSocket或SignalR处理实时数据？
15、在配置S7协议的57个数据点时，如何设计数据结构以提高可维护性？是否采用配置文件或数据库动态加载？
16、在非标自动化项目中，你使用C#开发过哪些核心功能？请举例说明**委托和事件**在工业软件中的实际应用场景。
17、 在WPF中，如何通过**依赖属性**实现动态UI更新？请结合AGV调度系统的退出加密功能说明实现逻辑。
18、在多线程环境下，如何确保Modbus/S7协议通信的线程安全？是否使用过`ConcurrentQueue`或`lock`机制？
19、 你开发的Modbus读取小工具是如何保证数据实时性和可靠性的？是否支持异常重试或超时机制？
20、在S7协议中，如何处理PLC数据点的批量读写？是否遇到过数据包解析错误，如何解决的？
21、在部署AGV调度系统到Linux平台时，遇到过哪些环境兼容性问题？如何通过代码或配置解决？
22、现场调试中，若客户反馈WMS系统任务下发延迟，你会如何逐步排查问题？（从网络、数据库、代码逻辑角度分析）
23、 在江西铜业项目中，你提到“解决了多个数据同步和接口兼容性问题”，请详细描述一个具体问题及其解决方案。
24、在联调WMS与RDS系统时，如何确保任务下发与执行的原子性？是否使用事务或消息队列（如RabbitMQ）？
25、虽然简历中未提及机器视觉经验，若项目中需要集成视觉检测功能，你会如何快速学习并实现基础功能（如OpenCV调用）？
26、 若需通过C#调用相机SDK实现简单视觉定位（如二维码识别），你会如何设计技术方案？
27、了解机械臂控制协议（如Modbus TCP或EtherCAT）吗？如何通过C#实现机械臂的路径规划指令下发？
28、
```

![[attachments/张海东.pdf]]