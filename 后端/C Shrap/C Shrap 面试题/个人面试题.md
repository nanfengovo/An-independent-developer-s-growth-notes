# 大界机器人
## 一面
>1、依赖属性是什么
2、依赖注入的生命周期、报错，怎么分析错误、依赖注入有哪几种方式
3、WPF资源
4、WPF绑定的原理
5、多线程相关
6、ORM相关原理
7、面向接口设计的优点




### 解答：
#### 1、依赖属性是什么

#####  **. 依赖属性（Dependency Property）**

- **定义**：WPF/Silverlight中用于扩展CLR属性的系统，支持数据绑定、动画、样式等特性。
    
- **特点**：
    
    - **属性继承**：子元素可继承父元素的属性值（如`FontSize`）。
        
    - **自动变更通知**：通过`PropertyChangedCallback`响应属性值变化。
        
    - **节省内存**：非静态值存储于全局`EffectiveValueEntry`中，按需分配。
        
- **实现**：使用`DependencyProperty.Register`静态方法注册。
    
- **对比CLR属性**：依赖属性通过依赖对象（`DependencyObject`）管理，支持复杂交互场景。

####  2、依赖注入的生命周期、报错，怎么分析错误
#####  **2. 依赖注入（DI）生命周期与错误分析**

- **生命周期**：
    
    - **Transient**：每次请求创建新实例。
        
    - **Scoped**：同一作用域内共享实例（如HTTP请求）。
        
    - **Singleton**：全局单例。
        
- **常见错误**：
    
    - **服务未注册**：抛出`InvalidOperationException`。
        
    - **循环依赖**：A依赖B，B又依赖A。
        
    - **生命周期不匹配**：如Scoped服务注入到Singleton中。
        
- **分析步骤**：
    
    1. 检查异常消息，定位未注册的服务或依赖关系。
        
    2. 使用日志记录容器构建过程。
        
    3. 工具辅助：如.NET的`dotnet watch`或第三方DI分析器。
#### 3、WPF资源
#####  **3. WPF资源**

- **资源类型**：
    
    - **静态资源（StaticResource）**：加载时一次性解析。
        
    - **动态资源（DynamicResource）**：运行时动态更新（如主题切换）。
        
- **作用域**：
    
    - **应用程序级**：`App.xaml`中定义，全局可用。
        
    - **窗口/控件级**：在窗口或控件`Resources`标签内定义，局部有效。
        
- **用途**：存储样式（`Style`）、模板（`ControlTemplate`）、画刷（`Brush`）等可重用对象。
-
#### 4、WPF绑定的原理
#####  **WPF绑定原理**

- **核心机制**：
    
    - **绑定源与目标**：通过`Binding`对象关联源属性（如ViewModel）与目标属性（如UI控件）。
        
    - **数据流方向**：`Mode`控制方向（`OneWay`、`TwoWay`等）。
        
    - **更新触发**：`UpdateSourceTrigger`决定何时同步数据（如失去焦点时）。
        
- **底层实现**：
    
    - 依赖属性系统监听属性变化。
        
    - `INotifyPropertyChanged`接口通知绑定目标更新。
        
    - 使用`BindingExpression`管理绑定状态。
#### 5、多线程相关
#####  **5. 多线程关键点**

- **线程与任务**：
    
    - **Thread**：底层线程管理，需手动处理同步。
        
    - **Task**：基于线程池，支持`async/await`异步模型。
        
- **同步机制**：
    
    - **lock/Monitor**：临界区保护。
        
    - **Semaphore/Mutex**：控制资源访问数量。
        
    - **Concurrent Collections**：线程安全集合（如`ConcurrentQueue`）。
        
- **常见问题**：
    
    - **死锁**：多个线程互相等待资源释放。
        
    - **竞态条件**：未同步导致数据不一致。

#### 6、ORM相关原理
#####  **ORM原理**

- **核心功能**：
    
    - **对象-表映射**：将类映射到数据库表，属性映射到列。
        
    - **查询转换**：将LINQ或方法链转换为SQL（如EF Core）。
        
    - **变更跟踪**：自动检测实体状态变化，生成更新语句。
        
- **工作模式**：
    
    - **Code First**：通过代码定义模型，生成数据库。
        
    - **Database First**：从现有数据库生成模型类。
        
- **性能优化**：
    
    - **延迟加载**：按需加载关联数据。
        
    - **批处理**：合并多个SQL操作减少开销。
#### 7、面向接口设计的优点
#####  **7. 面向接口设计的优点**

- **解耦**：接口隔离实现与使用，降低模块依赖性。
    
- **可测试性**：通过Mock接口实现单元测试。
    
- **扩展性**：新增实现类无需修改现有代码（符合开闭原则）。
    
- **多态支持**：同一接口可承载不同实现（如策略模式）。
    
- **依赖注入**：便于通过接口注入具体服务。

## 二面准备（根据简历）
![[attachments/张海东.pdf]]