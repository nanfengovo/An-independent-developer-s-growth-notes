# 创建
## 创建带权限管理的后端API模板
> abp new ABPJWT -a jwt -u none --version 8.3.4

### 使用上述命令创建模板，默认采用cookie的方式来验证，
ABP 框架的`/api/account/login`接口（Cookie 认证模式），在设计上默认限制 “已登录用户重复执行登录操作”，具体原因有两点：

1. **会话冲突保护**：当第一次登录成功后，服务器已为你创建了一个有效的 Cookie 会话。再次调用登录时，服务器检测到当前请求已携带有效 Cookie（即已处于登录状态），会判定为 “重复登录请求”，为避免会话混乱直接返回 400（Bad Request）。
2. **接口设计逻辑**：该接口的核心职责是 “创建新会话”，而非 “更新或验证已有会话”。已登录状态下调用，不符合接口的设计场景，因此返回参数错误。
###  二、Cookie、Token、JWT 的区别与联系
| 维度        | Cookie（ABP 默认 Cookie 认证）           | Token（ABP 的 API Token）                      | JWT（JSON Web Token）             |
| --------- | ---------------------------------- | ------------------------------------------- | ------------------------------- |
| **本质**    | 服务器存储在客户端的小型文本文件                   | 服务器生成的随机字符串凭证                               | 带签名的 JSON 格式字符串（自包含信息）          |
| **存储位置**  | 客户端浏览器 Cookie 存储区                  | 客户端（如 LocalStorage）                         | 客户端（如 LocalStorage/Header）      |
| **传递方式**  | 浏览器自动附加到请求头（无需手动处理）                | 需手动附加到请求头（如`Authorization: Bearer {Token}`） | 需手动附加到请求头（同 Token 格式）           |
| **信息存储**  | 仅存会话 ID，用户信息在服务器端存储（如 Session）     | 仅存随机字符串，用户信息在服务器端存储（如数据库 / 缓存）              | 自包含用户信息（如用户 ID、角色、过期时间），服务器无需存储 |
| **有效期控制** | 由服务器设置 Cookie 的`Expires`字段，浏览器自动过期 | 服务器端维护有效期（如数据库记录过期时间），客户端无法修改               | 有效期写在 Token 内部，服务器通过签名验证，无需额外存储 |
#### 核心联系：

1. 三者都是 “身份凭证”：目的都是让服务器确认 “当前请求来自合法用户”，避免匿名访问。
2. ABP 框架都支持：ABP 默认提供 Cookie 认证，同时支持通过配置启用 Token 认证和 JWT 认证，可根据项目场景选择。

## 将ABP默认的Cookie认证方式切换为JWT认证
